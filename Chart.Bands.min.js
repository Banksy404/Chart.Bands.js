/*!
 * Chart.bands.js
 * Version: v0.2.0-rc
 *
 * Copyright 2016 BBC
 * Released under the MIT license
 * https://github.com/BBC/Chart.bands.js/blob/master/LICENSE.md
 */
!function e(o,r,t){function n(l,i){if(!r[l]){if(!o[l]){var s="function"==typeof require&&require;if(!i&&s)return s(l,!0);if(a)return a(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[l]={exports:{}};o[l][0].call(f.exports,function(e){var r=o[l][1][e];return n(r?r:e)},f,f.exports,e,o,r,t)}return r[l].exports}for(var a="function"==typeof require&&require,l=0;l<t.length;l++)n(t[l]);return n}({1:[function(e,o,r){},{}],2:[function(e,o,r){function t(e,o,r,t){var l=o.getPixelForValue(t.yValue),i=t.bandLine;if("dashed"===i.type)for(var s=r.start;s<r.stop;s+=6)n(e,l,s,s+4,i.stroke,i.colour);else n(e,l,r.start,r.stop,i.stroke,i.colour);void 0!==i.label&&i.label.length>0&&a(e,i,{x:r.start,y:r.top-2*t.bandLine.fontSize})}function n(e,o,r,t,n,a){e.beginPath(),e.moveTo(r,o),e.lineTo(t,o),e.lineWidth=n,e.strokeStyle=a,e.stroke()}function a(e,o,r){if(e.font=f.fontString(o.fontSize,o.fontStyle,o.fontFamily),e.fillStyle=o.colour,e.fillText(o.label,r.x,r.y),"dashed"===o.type)for(var t=10;t<r.x-10;t+=6)n(e,r.y+.5*o.fontSize,t,t+4,o.stroke,o.colour);else n(e,r.y,10,r.x-10,o.stroke,o.colour)}function l(e){return"object"==typeof e.belowThresholdColour&&e.belowThresholdColour.length>0&&"number"==typeof e.yValue}function i(e,o,r,t,n,a){var l=o.getPixelForValue(a),i=e.createLinearGradient(0,r,0,0),s=1-l/r;try{return i.addColorStop(0,n),i.addColorStop(s,n),i.addColorStop(s,t),i.addColorStop(1,t),i}catch(c){return console.warn("ConfigError: Chart.Bands.js had a problem applying one or more colors please check that you have selected valid color strings"),t}}function s(e){return d[e]?void(g=d[e]):(console.warn("Warning: The Chart.Bands.js plugin is not supported with chart type "+e),void(h=!1))}var c,f,d,u,h,g,p;c=e("Chart"),c="function"==typeof c?c:window.Chart,f=c.helpers,h=!0,g="borderColor",d={bubble:"backgroundColor",line:"borderColor"},u={borderColor:"backgroundColor",backgroundColor:"borderColor"},c.Bands=c.Bands||{},p=c.Bands.defaults={bands:{yValue:!1,bandLine:{stroke:.01,colour:"rgba(0, 0, 0, 1.000)",type:"solid",label:"",fontSize:"12",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontStyle:"normal"},belowThresholdColour:["rgba(0, 255, 0, 1.000)"]}};var b=c.PluginBase.extend({beforeInit:function(e){s(e.config.type)},afterScaleUpdate:function(e){var o,r,t,n;if(h!==!1)if(o=e.chart.ctx.canvas,r=f.configMerge(c.Bands.defaults.bands,e.options.bands),l(r))for(var a=0;a<e.chart.config.data.datasets.length;a++){if(t=e.chart.config.data.datasets[a][g],t instanceof CanvasGradient)return;n=i(o.getContext("2d"),e.scales["y-axis-0"],e.chart.height,t,r.belowThresholdColour[a],r.yValue),e.chart.config.data.datasets[a][g]=n}else console.warn("ConfigError: The Chart.Bands.js config seems incorrect")},afterDraw:function(e){var o,r;h!==!1&&(o=e.chart.ctx.canvas,r=f.configMerge(c.Bands.defaults.bands,e.options.bands),"number"==typeof r.yValue?t(o.getContext("2d"),e.scales["y-axis-0"],{top:e.chartArea.top,start:e.chartArea.left,stop:e.chartArea.right},r):console.warn("ConfigError: The Chart.Bands.js plugin config requires a yValue"))}});c.pluginService.register(new b)},{Chart:1}]},{},[2]);